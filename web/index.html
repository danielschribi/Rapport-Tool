<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rapport-Tool</title>
  <link rel="stylesheet" href="/web/styles.css" />
</head>
<body>
  <!-- Fixierte Menüleiste -->
  <header class="topbar">
    <!-- Avatar links -->
    <button id="avatarBtn" class="avatar avatar--loggedout" title="Anmelden">
      <span class="avatar__mark">?</span>
    </button>

    <!-- App-Name oder Platzhalter -->
    <div class="brand-sep"></div>

    <!-- Uhr/Datum zentriert -->
    <div class="clock">
      <div id="clockTime" class="clock__time">--:--</div>
      <div id="clockDate" class="clock__date">--.--.----</div>
    </div>

    <!-- Flex-Filler -->
    <div class="grow"></div>

    <!-- Buttons rechts -->
    <nav class="menu">
      <!-- Home -->
      <button id="homeBtn" class="btn btn--icon" title="Home / Abbrechen (ohne Speichern)">
        <svg viewBox="0 0 24 24" class="ico"><path d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1v-10.5Z"/></svg>
        <span>Home</span>
      </button>
      <!-- Neue Meldung -->
      <button id="newBtn" class="btn">
        <svg viewBox="0 0 24 24" class="ico"><path d="M12 5v14M5 12h14"/></svg>
        <span>Neue Meldung</span>
      </button>
      <!-- Userverwaltung -->
      <button id="usersBtn" class="btn">
        <svg viewBox="0 0 24 24" class="ico"><path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm8 10v-2a4 4 0 0 0-3-3.87M17 8a4 4 0 0 1 0 6"/></svg>
        <span>Userverwaltung</span>
      </button>
      <!-- System -->
      <button id="sysBtn" class="btn">
        <svg viewBox="0 0 24 24" class="ico"><path d="M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7Zm7.4-3.5a7.4 7.4 0 0 0-.15-1.5l2.02-1.58-2-3.46-2.4.97a7.52 7.52 0 0 0-1.31-.77l-.36-2.6H9.8l-.36 2.6c-.45.2-.89.45-1.3.75l-2.42-.95-2 3.46L5.72 10a7.4 7.4 0 0 0 0 3l-2 1.58 2 3.46 2.42-.95c.41.3.85.55 1.3.75l.36 2.6h4.38l.36-2.6c.46-.2.9-.45 1.31-.77l2.4.97 2-3.46-2.02-1.58c.1-.5.16-1 .16-1.5Z"/></svg>
        <span>System</span>
      </button>
    </nav>
  </header>

  <!-- Haupt-Content -->
  <main id="view" class="view">
    <!-- Startbildschirm: Meldungsliste -->
    <section id="startView" class="card">
      <h1>Meldungen</h1>
      <div id="meldungenWrap" class="table-wrap">
        <table class="table" id="meldungenTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Titel</th>
              <th>Datum</th>
              <th>Status</th>
              <th>Anlage</th>
              <th>Bereich</th>
            </tr>
          </thead>
          <tbody id="meldungenBody">
            <tr><td colspan="6" class="muted">Lade Daten…</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Platzhalter für andere Views -->
    <section id="meldView" class="card hide">
      <h1>Neue Meldung</h1>
      <div class="muted">Hier öffnet der Dialog „Meldung erfassen“.</div>
    </section>

    <section id="usersView" class="card hide">
      <h1>Userverwaltung</h1>
      <div class="muted">Hier erscheint die Userliste (DB/users.json).</div>
    </section>

    <section id="sysView" class="card hide">
      <h1>System</h1>
      <p class="muted">Pflege der Auswahlwerte <strong>rolle</strong>, <strong>anlage</strong>, <strong>status</strong>, <strong>bereich</strong>.</p>
    </section>
  </main>

  <!-- Login-Modal (Avatar-Klick) -->
  <dialog id="loginDlg" class="modal">
    <form method="dialog" class="modal__body">
      <h2>Anmelden</h2>
      <p class="muted">Du kannst dich mit Google anmelden oder (wenn freigeschaltet) mit Benutzername/Passwort.</p>

      <div class="actions">
        <a class="btn btn--primary" href="/auth/google">
          <svg viewBox="0 0 24 24" class="ico"><path d="M21.35 11.1h-9v2.95h5.2c-.23 1.27-1.58 3.73-5.2 3.73-3.14 0-5.7-2.6-5.7-5.8 0-3.2 2.56-5.8 5.7-5.8 1.8 0 3 .76 3.7 1.42l2.52-2.43C16.96 3.7 15.04 3 13 3 7.96 3 3.9 7.03 3.9 12s4.06 9 9.1 9c5.25 0 8.7-3.7 8.7-8.93 0-.6-.07-1.07-.35-1.97Z"/></svg>
          Mit Google anmelden
        </a>
      </div>

      <div class="modal__footer">
        <button class="btn" value="cancel">Schliessen</button>
      </div>
    </form>
  </dialog>

  <script src="/web/app.js"></script>
</body>
</html>
